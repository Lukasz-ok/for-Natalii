<!doctype html>
<html lang="pl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ðŸ’—</title>

<style>
  *{ box-sizing:border-box; }

  body{
    margin:0;
    min-height:100vh;
    display:grid;
    place-items:center;
    background:#ffd6e8;
    font-family: system-ui, Arial, sans-serif;
    padding:18px;
  }

  .card{
    position:relative;               /* waÅ¼ne: to jest granica ucieczki */
    width:min(520px, 92vw);
    background:rgba(255,255,255,.88);
    border-radius:22px;
    padding:18px;
    text-align:center;
    box-shadow:0 18px 40px rgba(0,0,0,.15);
    overflow:hidden;                  /* Å¼eby nic nie wychodziÅ‚o poza kartÄ™ */
  }

  .photo{
    aspect-ratio:4/3;
    border-radius:16px;
    overflow:hidden;
    background:rgba(0,0,0,.05);
  }

  .photo img{
    width:100%;
    height:100%;
    object-fit:cover;
    display:block;
  }

  .caption{
    margin:14px 0;
    font-size:18px;
    font-weight:650;
  }

  .buttons{
    display:flex;
    justify-content:center;
    gap:12px;
    align-items:center;
  }

  .btn{
    padding:12px 18px;
    border:none;
    border-radius:14px;
    font-weight:700;
    cursor:pointer;
  }

  #yesBtn{ background:#ff4fa3; color:#fff; }

  #noBtn{
    background:#fff;
    color:#222;
    box-shadow:0 10px 25px rgba(0,0,0,.12);
    transition:left .25s ease-out, top .25s ease-out;
    z-index:50;
  }

  .result{
    display:none;
    margin-top:16px;
    padding:14px;
    background:rgba(255,255,255,.75);
    border-radius:16px;
  }

  .result img{
    width:100%;
    max-height:260px;
    object-fit:cover;
    border-radius:14px;
    margin-top:10px;
  }
</style>
</head>

<body>
  <div class="card" id="card">

    <div class="photo">
      <!-- ZDJÄ˜CIE STARTOWE -->
      <img src="1.JPEG" alt="">
    </div>

    <div class="caption">Czy zostaniesz mojÄ… walentynkÄ…? ðŸ’—</div>

    <div class="buttons" id="buttons">
      <button class="btn" id="yesBtn" type="button">TAK</button>
      <button class="btn" id="noBtn" type="button">NIE</button>
    </div>

    <div class="result" id="result">
      <h3>WiedziaÅ‚em ðŸ˜ŽðŸ’—</h3>
      <!-- DRUGIE ZDJÄ˜CIE -->
      <img src="2.JPEG" alt="">
    </div>

  </div>

<script>
  const card = document.getElementById("card");
  const buttons = document.getElementById("buttons");
  const noBtn = document.getElementById("noBtn");
  const yesBtn = document.getElementById("yesBtn");
  const result = document.getElementById("result");

  let escaped = false;
  let btnX = 0, btnY = 0;

  const margin = 12;
  const reactDist = 90;
  const speed = 0.22;

  function clamp(v, min, max){ return Math.max(min, Math.min(max, v)); }

  function update(){
    noBtn.style.left = btnX + "px";
    noBtn.style.top  = btnY + "px";
  }

  function escapeNow(){
    if (escaped) return;
    escaped = true;

    const cardRect = card.getBoundingClientRect();
    const btnRect  = noBtn.getBoundingClientRect();

    // 1) placeholder, Å¼eby "TAK" nie zmieniÅ‚ miejsca
    const ph = document.createElement("div");
    ph.style.width = btnRect.width + "px";
    ph.style.height = btnRect.height + "px";
    buttons.replaceChild(ph, noBtn);

    // 2) przerzucamy przycisk do .card, Å¼eby uciekaÅ‚ po caÅ‚ej karcie
    card.appendChild(noBtn);
    noBtn.style.position = "absolute";

    // 3) start dokÅ‚adnie w miejscu, gdzie byÅ‚ w rzÄ™dzie
    btnX = btnRect.left - cardRect.left;
    btnY = btnRect.top  - cardRect.top;
    update();
  }

  card.addEventListener("mousemove", (e) => {
    const cardRect = card.getBoundingClientRect();
    const btnRect  = noBtn.getBoundingClientRect();

    const mouseX = e.clientX - cardRect.left;
    const mouseY = e.clientY - cardRect.top;

    const cx = (btnRect.left - cardRect.left) + btnRect.width / 2;
    const cy = (btnRect.top  - cardRect.top)  + btnRect.height / 2;

    const dx = cx - mouseX;
    const dy = cy - mouseY;
    const dist = Math.hypot(dx, dy);

    // dopiero przy zbliÅ¼eniu odkleja siÄ™
    if (dist < reactDist && !escaped) escapeNow();

    if (escaped && dist < reactDist) {
      btnX += (dx / dist) * 160 * speed;
      btnY += (dy / dist) * 160 * speed;

      btnX = clamp(btnX, margin, cardRect.width  - btnRect.width  - margin);
      btnY = clamp(btnY, margin, cardRect.height - btnRect.height - margin);

      update();
    }
  });

  yesBtn.addEventListener("click", () => {
  // ukryj start
  document.querySelector(".photo").style.display = "none";
  document.querySelector(".caption").style.display = "none";
  document.querySelector(".buttons").style.display = "none";

  // usuÅ„ "NIE" (dziaÅ‚a nawet jeÅ›li uciekÅ‚ i jest w innym miejscu)
  const no = document.getElementById("noBtn");
  if (no) no.remove();

  // pokaÅ¼ wynik
  result.style.display = "block";
});
</script>
</body>
</html>
